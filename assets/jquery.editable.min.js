//////////////////////////////////////
//  AUTHOR:         Marco Cusano    //
//  CREATION DATE:  2019/09/25      //
//  LAST UPDATE:    2019/10/01      //
//  VERSION:        1.1-min         //
//////////////////////////////////////

function jQueryEditable(t){t.attr("editable")?initJQueryEditable(t):t.find('[editable="true"]').each(function(){initJQueryEditable($(this))})}function initJQueryEditable(n){n.attr("contentEditable","true");var u=n.attr("data-placeholder")||null;u&&(n.on("click",function(t){$(this).html()==u&&$(this).html(null),$(this).attr("data-onclick")&&window[$(this).attr("data-onclick")]()}),n.focusout(function(){""==$(this).html()&&$(this).html(u),$(this).attr("data-onfocusout")&&window[$(this).attr("data-onfocusout")]()})),n.on("keypress",function(t){13==t.keyCode&&"textarea"!=$(n).attr("data-type")&&($(n).blur(),t.preventDefault())}),n.on("DOMSubtreeModified",function(t){var n={dom:$(this),content:$(this).attr("data-content")||$(this).html(),input:$("#"+$(this).attr("data-input"))||null,type:$(this).attr("data-type")||"text",min:$(this).attr("data-min")||-2147483647,max:$(this).attr("data-max")||2147483647,onChange:$(this).attr("data-onchange")||null},e=$(this).html();if(n.content.length)if("number"==n.type){if(isNaN(e))return u?$(n.dom).html(u):$(n.dom).html("0"),!1;if(r<n.min)return $(n.dom).html(n.min),!0;if(r>n.max)return $(n.dom).html(n.max),!0}else if("price"==n.type||"real"==n.type||"double"==n.type||"float"==n.type)for(var i=["0","1","2","3","4","5","6","7","8","9",".",","],a=n.content.length,o=0;a--;){if(","!=(e=n.content.charAt(a))&&"."!=e||o++,1<o||jQuery.inArray(e,i)<0)return u?$(n.dom).html(u):$(n.dom).html("0.00"),!1;if((r=n.content.replace(",","."))<n.min)return $(n.dom).html(n.min),!1;if(r>n.max)return $(n.dom).html(n.max),!1}else if("email"==n.type){a=n.content.length,o=0;for(var l=0;a--;){"@"==(e=n.content.charAt(a))&&o++,"."==e&&l++}(1!==o||1!==l||n.content.length<5)&&n.input&&$(n.input).val(null)}else if("link"==n.type||"url"==n.type){for(a=n.content.length;a--;){"http"==(e=n.content.charAt(a))&&0}n.input&&($(this).html("https://"),$(n.input).val(null))}try{if(n.input){var r=$(this).html().replace(",",".");$(n.input).val(r)}}catch(t){return console.log("Attached input element not found. Please make sure you specified a valid 'id' in your 'data-input' value."),!1}return n.onChange&&window[n.onChange](),!0});var t={event:$(this).attr("data-onevent")||null,function:$(this).attr("data-onevent-function")||null};t.event&&t.function&&$(this).on(t.event,function(){window[t.function]()}),$(this).attr("data-onend")&&window[$(this).attr("data-onend")]()}$('[editable="true"]').each(function(){initJQueryEditable($(this))});
